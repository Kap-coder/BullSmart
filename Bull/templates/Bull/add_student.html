
{% extends 'Bull/base.html' %}
{% block content %}
<div class="container py-4" style="max-width: 600px;">
    <div class="card shadow" style="border-radius: 18px;">
        <div class="card-header text-center" style="background: var(--primary); color: var(--text-light); border-radius: 18px 18px 0 0;">
            <h3 class="mb-0">Ajouter un élève</h3>
        </div>
        <div class="card-body" style="background: var(--bg-light);">
            <form method="post" enctype="multipart/form-data" class="needs-validation" novalidate>
                {% csrf_token %}
                {{ form.non_field_errors }}
                <div class="row g-3">
                    <div class="col-12">
                        <label for="id_matricule" class="form-label">Matricule</label>
                        <input type="text" class="form-control styled-field" id="id_matricule" name="matricule" value="{{ form.matricule.value }}" readonly>
                    </div>
                    <div class="col-md-6">
                        <label for="id_last_name" class="form-label">Nom</label>
                        <input type="text" name="last_name" id="id_last_name" class="form-control styled-field" value="{{ form.last_name.value }}" required>
                    </div>
                    <div class="col-md-6">
                        <label for="id_first_name" class="form-label">Prénom</label>
                        <input type="text" name="first_name" id="id_first_name" class="form-control styled-field" value="{{ form.first_name.value }}" required>
                    </div>
                    <div class="col-md-6">
                        <label for="id_gender" class="form-label">Sexe</label>
                        <select name="gender" id="id_gender" class="form-control styled-field" required>
                            <option value="M" {% if form.gender.value == 'M' %}selected{% endif %}>Masculin</option>
                            <option value="F" {% if form.gender.value == 'F' %}selected{% endif %}>Féminin</option>
                        </select>
                    </div>
                    <div class="col-md-6">
                        <label for="id_birth_date" class="form-label">Date de naissance</label>
                        <input type="date" name="birth_date" id="id_birth_date" class="form-control styled-field" value="{{ form.birth_date.value }}" required>
                    </div>
                    <div class="col-12">
                        <label for="id_birth_place" class="form-label">Lieu de naissance</label>
                        <input type="text" name="birth_place" id="id_birth_place" class="form-control styled-field" value="{{ form.birth_place.value }}" required>
                    </div>
                    <div class="col-12">
                        <label for="id_photo" class="form-label">Photo</label>
                        <input type="file" name="photo" id="id_photo" class="form-control styled-field">
                    </div>
                    <div class="col-12">
                        <label for="id_classroom" class="form-label">Classe</label>
                        <select name="classroom" id="id_classroom" class="form-control styled-field" required>
                            {% for c in form.classroom.field.queryset %}
                                <option value="{{ c.pk }}" {% if form.classroom.value == c.pk|stringformat:'s' %}selected{% endif %}>{{ c.name }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="col-12">
                        <div class="form-check">
                            <input type="checkbox" name="repeater" id="id_repeater" class="form-check-input" {% if form.repeater.value %}checked{% endif %}>
                            <label class="form-check-label" for="id_repeater">Redoublant</label>
                        </div>
                    </div>
                </div>
                <div class="mt-4 d-flex justify-content-between">
                    <a href="/students/" class="btn" style="background: var(--secondary); color: var(--text-light);">Annuler</a>
                    <button type="submit" class="btn" style="background: var(--primary); color: var(--text-light); font-weight: bold;">Enregistrer</button>
                </div>
            </form>
        </div>
    </div>
</div>
<style>
    .card {
        border: none;
    }
    .form-label {
        color: var(--primary);
        font-weight: 500;
    }
    .styled-field {
        background: #e9ecef !important;
        color: var(--primary) !important;
        font-weight: bold !important;
        border: 1px solid #ced4da;
    }
    .form-control:focus, .styled-field:focus {
        border-color: var(--primary);
        box-shadow: 0 0 0 0.2rem rgba(45,93,161,0.15);
    }
    .btn:focus {
        box-shadow: 0 0 0 0.2rem rgba(45,93,161,0.15);
    }
    .form-check-input:checked {
        background-color: var(--primary);
        border-color: var(--primary);
    }
</style>
{% endblock %}